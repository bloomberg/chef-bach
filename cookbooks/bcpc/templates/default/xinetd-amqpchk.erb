################################################
#
#              Generated by Chef
#
################################################

# default: on
# description: amqpchk
service amqpchk
{
# this is a config for xinetd, place it in /etc/xinetd.d/
        disable = no
        flags           = REUSE
        socket_type     = stream
        bind            = <%="#{node[:bcpc][:management][:ip]}"%>
        port            = 5673
        wait            = no
        user            = rabbitmq
        server          = /usr/local/bin/rabbitmqcheck
        log_on_failure  += USERID
        only_from       = <%="#{node[:bcpc][:management][:cidr]}"%>
        # recommended to put the IPs that need
        # to connect exclusively (security purposes)
        per_source      = UNLIMITED
}
